{% extends "base.html" %}

{% block title %}Forgot Password - Rankrite{% endblock %}

{% block head %}
<style>
    .forgot-password-container {
        max-width: 500px;
        margin: 50px auto;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 0 20px var(--shadow-color);
        background-color: var(--bg-secondary);
    }
    
    .forgot-password-header {
        text-align: center;
        margin-bottom: 30px;
    }
    
    .forgot-password-header img {
        height: 80px;
        margin-bottom: 20px;
    }
    
    .form-floating {
        margin-bottom: 20px;
    }
    
    .btn-submit {
        width: 100%;
        padding: 12px;
        font-weight: bold;
    }
    
    .forgot-password-footer {
        text-align: center;
        margin-top: 20px;
    }
    
    .instructions {
        background-color: var(--bg-tertiary);
        padding: 15px;
        border-radius: 5px;
        margin-bottom: 20px;
    }
</style>
{% endblock %}

{% block content %}
<div class="forgot-password-container">
    <div class="forgot-password-header">
        <img src="{{ url_for('static', filename='assets/logo.png') }}" alt="Rankrite">
        <h2>Forgot Password</h2>
        <p class="text-muted">Enter your email to reset your password</p>
    </div>
    
    <div class="instructions">
        <p class="mb-0"><i class="fas fa-info-circle text-primary me-2"></i> We'll send you a link to reset your password. Please check your email after submitting.</p>
    </div>
    
    <form method="POST" action="{{ url_for('forgot_password') }}">
        <div class="form-floating">
            <input type="email" class="form-control" id="email" name="email" placeholder="Email" required>
            <label for="email">Email</label>
        </div>
        
        <button type="submit" class="btn btn-primary btn-submit">Send Reset Link</button>
    </form>
    
    <div class="forgot-password-footer">
        <p>Remember your password? <a href="{{ url_for('login') }}">Back to login</a></p>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Form validation
        const forgotPasswordForm = document.querySelector('form[method="POST"]');
        
        forgotPasswordForm.addEventListener('submit', function(event) {
            const email = document.getElementById('email').value.trim();
            
            if (!email) {
                event.preventDefault();
                showToast('Please enter your email address', 'error');
                return;
            }
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                event.preventDefault();
                showToast('Please enter a valid email address', 'error');
                return;
            }
            
            // Show loading spinner
            showSpinner();
            
            // Simulate API call
            setTimeout(() => {
                hideSpinner();
                showToast('Password reset link sent successfully!', 'success');
            }, 1500);
        });
    });
</script>
{% endblock %}